{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/auth.js","webpack:///./src/components/Auth.jsx","webpack:///./src/services/spotify.js","webpack:///./src/stylesheets/app.css","webpack:///./src/stylesheets/loading.css","webpack:///external \"axios\"","webpack:///external \"electron\"","webpack:///external \"preact\"","webpack:///external \"qs\""],"names":["ipcRenderer","shell","require","Spotify","AuthMethods","on","event","data","params","URLSearchParams","split","pop","spotifyWasAuthorized","e","state","loadApp","launchClicked","send","render","app","document","getElementById","remote","Menu","MenuItem","rightClickPosition","menu","append","label","click","getCurrentWindow","inspectElement","x","y","window","addEventListener","preventDefault","popup","App","Component","constructor","props","createRef","array","Uint32Array","spotifyState","crypto","getRandomValues","toString","authorize","authCode","get","getTokens","then","tokens","setTokens","invoke","key","value","setUser","user","setState","step","catch","err","console","log","playlistsContainerClass","playlists","Promise","resolve","reject","getPlaylists","resp","playlist","getPlaylist","currentTarget","dataset","id","tracks","showPlaylists","val","playlistInput","current","trim","length","setPlaylist","k","setupState","name","playlistsLoadingClass","componentDidMount","init","url","undefined","JSON","parse","stringify","userID","concat","items","filter","item","owner","next","done","getClass","klass","navState","savePlaylist","showUserPlaylists","map","p","saveExisting","hideUserPlaylists","qs","axios","env","redirectUri","appConfig","refreshToken","authRequest","create","baseURL","authHeader","Buffer","from","CLIENT_ID","CLIENT_SECRET","defaults","headers","common","apiRequest","simRequest","interceptors","response","use","config","error","refresh","original","request","module","exports","access_token","status","authOptions","method","currentRequestOptions","currentRequestAttempts","api","options","Error","setConfig","trackAlreadyLiked","uri","hearts","indexOf","refresh_token","scope","join","openExternal","public","getFaveslistTracks","addTrack","trackURI","uris","snapshot_id","player","currentlyPlaying"],"mappings":"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","file":"auth.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/auth.js\");\n","const {ipcRenderer, shell} = require('electron')\nconst Spotify = require('./services/spotify')\nimport { h, render, Component, createRef } from 'preact';\nimport './stylesheets/app.css'\nimport Auth from './components/Auth.jsx'\n\nlet AuthMethods;\n\nipcRenderer.on('authorized', (event, data) => {\n  let params = new URLSearchParams(data.split('?').pop())\n  AuthMethods.spotifyWasAuthorized(params)\n})\n\n\nipcRenderer.on('did-finish-load', (e, state) => {\n  loadApp(state)\n})\n\nfunction launchClicked() {\n  ipcRenderer.send('launch-clicked')\n}\n\nfunction loadApp(state) {\n  render(\n    <Auth\n      ipcRenderer={ipcRenderer}\n      setupState={state}\n      Spotify={Spotify}\n      ref={app => AuthMethods = app} \n    />, \n      document.getElementById('app')\n\n  );\n}\n\n/* \n\n  inspect element \n  \n  \n  */\n\n const {remote} = require('electron')\n const {Menu, MenuItem} = remote\n let rightClickPosition;\n const menu = new Menu()\n menu.append(new MenuItem({\n   label: 'Inspect Element',\n   click: () => {\n     remote.getCurrentWindow().inspectElement(rightClickPosition.x, rightClickPosition.y)\n   }\n }))\n \n window.addEventListener('contextmenu', (e) => {\n   e.preventDefault()\n   rightClickPosition = {x: e.x, y: e.y}\n   menu.popup(remote.getCurrentWindow())\n }, false)\n ","import { h, render, Component, createRef } from 'preact';\nimport { ipcRenderer } from 'electron';\nimport '../stylesheets/loading.css'\n\nexport default class App extends Component {\n\n  constructor(props) {\n    super(props)\n    this.Spotify = this.props.Spotify\n    this.ipcRenderer = this.props.ipcRenderer\n    let step;\n    for (let k in props.setupState) {\n      if (props.setupState[k]) {\n        step = k;\n        break;\n      }\n    }\n    this.state = {\n      spotifyState: null,\n      step: step,\n      playlist: {\n        name: null\n      },\n      playlistsContainerClass: 'hidden',\n      playlistsLoadingClass: '',\n      playlists: []\n    }\n  }\n\n  playlistInput = createRef();\n\n  componentDidMount() {\n    this.Spotify.init()\n  }\n\n  authorize = () => {\n    const array = new Uint32Array(1);\n    this.state.spotifyState = (window.crypto.getRandomValues(array)[0]).toString()\n    this.Spotify.authorize(this.state.spotifyState)\n  }\n\n  spotifyWasAuthorized = (params) => {\n    let authCode = params.get('code')\n    if (params.get('state') !== this.state.spotifyState) {\n      // todo generic error\n      return false\n    }\n    this.Spotify.getTokens(authCode)\n      .then( (tokens) => {\n        this.Spotify.setTokens(tokens)\n        ipcRenderer.invoke('replace-config', {key: 'tokens', value: tokens})\n      }).then(() => {\n        return this.Spotify.setUser()\n      }).then((user) => {\n        ipcRenderer.invoke('replace-config', {key: 'user', value: user})\n        this.setState({step: 'playlist'})\n      }).catch((err) => {\n        console.log(err)\n      })\n  }\n\n  getPlaylists(resolve, reject, url = undefined) { \n    this.Spotify.getPlaylists(url).then(async (resp) => {\n      var current = JSON.parse(\n        JSON.stringify(this.state.playlists)\n      )\n      var userID = await ipcRenderer.invoke('getConfig', 'user.id')\n      this.setState({\n          playlists: current.concat( resp.data.items.filter(item => item.owner.id === userID) )\n      })\n      if (resp.data.items.length < 20) {\n        resolve()\n      } else {\n        var url = resp.data.next\n        this.getPlaylists(resolve, reject, url)        \n      }\n    }).catch((err) => {\n      reject(err)\n    })\n\n  }\n\n  showUserPlaylists = async () => {\n    this.setState({playlistsContainerClass: ''})\n    await this.setState({playlists: []})\n    new Promise((resolve, reject) => {\n      this.getPlaylists(resolve, reject)\n    }).then(() => {\n      this.setState({playlists: resp})\n    }).catch((err) => {\n      console.log(err)\n    }) \n  }\n\n  hideUserPlaylists = () => {\n    this.setState({playlistsContainerClass: 'hidden'})\n  }\n\n  saveExisting = async (e) => {\n    let playlist = await this.Spotify.getPlaylist(e.currentTarget.dataset.id)\n    delete playlist.tracks\n    ipcRenderer.invoke('replace-config', {key: 'playlist', value: playlist})\n    this.setState({showPlaylists: false}, () => {\n      this.setState({step: 'done'})\n    })\n  }\n\n  savePlaylist = async () => {\n    let val = this.playlistInput.current.value.trim()\n    if (val.length > 0) {\n      let playlist = await this.Spotify.setPlaylist(val)\n      ipcRenderer.invoke('replace-config', {key: 'playlist', value: playlist})\n      this.setState({step: 'done'})\n    }\n  }\n\n  done() {\n    ipcRenderer.send('setup-complete')\n  }\n\n  getClass(step) {\n    let klass = step === this.state.step ? 'active' : 'hidden'\n    return klass\n  }\n  \n  navState(step) {\n    let klass = step === this.state.step ? 'bg-gray-900' : 'border border-gray-900'\n    return klass\n  }\n\n  render() {\n    return (\n      <div class=\"flex flex-col justify-between h-screen pt-4\">\n        <div class=\"mx-auto max-w-sm text-center py-2\">\n          <svg style=\"width:100px\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1546.58 270.85\"><g id=\"Layer_2\" data-name=\"Layer 2\"><g id=\"main\"><path d=\"M11.65,267.94H0V0H11.65Zm23.31,0H23.31V0H35Zm23.31,0H46.62V0H58.27ZM180.53,11.65H81.58V23.31h99V35H81.58V46.62h99V58.27H81.58V69.93h99V81.58H81.58V93.24h69.81v11.65H81.58v11.66h69.81V128.2H81.58v11.66h69.81v11.65H81.58v11.54h69.81V174.7H81.58v93.24H69.93V0h110.6Z\" style=\"fill:#ff9cd6\"/><path d=\"M285.41,270.27c-62.7,0-113.63-50.23-113.63-113a113.63,113.63,0,0,1,227.26,0V267.94H387.39V157.22a102,102,0,0,0-204,0c0,56.29,45.69,101.51,102,101.51,2.91,0,5.83-.23,8.74-.46V246.73c-2.91.23-5.83.35-8.74.35-49.88,0-90.32-40-90.32-89.86a90.32,90.32,0,0,1,180.64,0V267.94H364.08V157.22a78.67,78.67,0,1,0-78.67,78.32c2.91,0,5.83-.23,8.74-.47V223.42a73.3,73.3,0,0,1-8.74.58,66.84,66.84,0,1,1,67-66.78V267.94H340.77V157.22a55.36,55.36,0,1,0-55.36,55.13,52.71,52.71,0,0,0,8.74-.7V199.88a42.94,42.94,0,0,1-8.74.93,43.59,43.59,0,1,1,43.71-43.59V267.94H317.46V157.22a32.05,32.05,0,1,0-32,32.05,31,31,0,0,0,8.74-1.28V175.64a20,20,0,0,1-8.74,2,20.4,20.4,0,1,1,20.39-20.4V267.94A88.39,88.39,0,0,1,285.41,270.27Zm8.74-113a8.74,8.74,0,1,0-17.48,0,8.74,8.74,0,1,0,17.48,0Z\" style=\"fill:#ff9cd6\"/><path d=\"M390.29,46.62h12.35l61.77,221.32H452.17Zm24.59,0h12.24l61.76,221.32H476.65Zm24.47,0h12.24l61.77,221.32H501.12Zm24.48,0h12.23L538,267.94H525.71Zm160.37,0L562.43,267.94H550.19L488.3,46.62h12.24l6.76,24,6.64-24H526.3L513.36,92.54l6.18,21.91,19-67.83h12.24l-25.06,89.74,6.06,21.91L563,46.62h12.24L538,180.18l6.06,22L587.48,46.62h12.24l-49.53,177.5L556.25,246,612,46.62Z\" style=\"fill:#ff9cd6\"/><path d=\"M691.66,163.05h145.1c-.23,4-.58,7.81-1.16,11.65H696.32a32.83,32.83,0,0,0,13.52,11.66H833.15c-1,4-2.33,7.81-3.73,11.65H739a44.14,44.14,0,0,1-15.62,2.92,43.65,43.65,0,1,1,0-87.3,44.82,44.82,0,0,1,15.27,2.8h22.14a55.31,55.31,0,1,0,.12,81.58l8.16,8.28a67,67,0,1,1,7.34-89.86h14.1a78.5,78.5,0,1,0-13.17,98.13l8.28,8.28a90.35,90.35,0,1,1,18.29-106.41h12.82A101.68,101.68,0,1,0,794,231l8,8.27a113,113,0,0,1-78.67,31.58c-62.82,0-113.75-50.81-113.75-113.51a113.69,113.69,0,0,1,223.54-29.26H710.07a32.35,32.35,0,0,0-13.63,11.66H835.6c.58,3.85.93,7.69,1.16,11.65h-145a25,25,0,0,0-.59,6A46,46,0,0,0,691.66,163.05Z\" style=\"fill:#ff9cd6\"/><path d=\"M998,120.86v2H986.39v-2a65.56,65.56,0,1,0-65.5,65.5,7.29,7.29,0,0,1,0,14.57,7.06,7.06,0,0,1-6.06-3.15,79.52,79.52,0,0,1-12.82-2.1,18.94,18.94,0,1,0,18.88-21,53.85,53.85,0,1,1,53.85-53.84v2H963.08v-2a42.25,42.25,0,1,0-42.19,42.19,30.6,30.6,0,1,1-30.65,30.65v-2A77.17,77.17,0,1,1,998,120.86Zm0,72.84a77.15,77.15,0,1,1-154.3,0v-2h11.54v2a65.56,65.56,0,1,0,65.61-65.5,7.29,7.29,0,1,1,0-14.57,7,7,0,0,1,6,3.15,75.56,75.56,0,0,1,12.82,2.1,18.94,18.94,0,1,0-18.77,21,53.85,53.85,0,1,1-54,53.84v-2h11.66v2a42.25,42.25,0,1,0,42.3-42.31,30.54,30.54,0,1,1,30.54-30.53v2A77.2,77.2,0,0,1,998,193.7Z\" style=\"fill:#ff9cd6\"/><path d=\"M1021.34,267.94h-11.65V0h11.65Zm23.31,0H1033V0h11.65Zm23.31,0H1056.3V0H1068Zm23.31,0h-11.66V0h11.66Zm23.31,0h-11.66V0h11.66Z\" style=\"fill:#ff9cd6\"/><path d=\"M1235.07.12V11.77H1130.3V.12ZM1130.3,23.31h104.77V35H1130.3Zm104.77,244.63h-11.65V58.27h-11.65V267.94h-11.66V58.27h-11.54V267.94h-11.65V58.27h-11.66V267.94h-11.65V58.27H1142V267.94H1130.3V46.62h104.77Z\" style=\"fill:#ff9cd6\"/><path d=\"M1401,120.86v2h-11.66v-2a65.56,65.56,0,1,0-65.5,65.5,7.29,7.29,0,0,1,0,14.57,7.07,7.07,0,0,1-6.06-3.15,79.52,79.52,0,0,1-12.82-2.1,18.94,18.94,0,1,0,18.88-21,53.85,53.85,0,1,1,53.85-53.84v2h-11.66v-2a42.25,42.25,0,1,0-42.19,42.19,30.6,30.6,0,1,1-30.65,30.65v-2A77.18,77.18,0,1,1,1401,120.86Zm0,72.84a77.16,77.16,0,0,1-154.31,0v-2h11.54v2a65.56,65.56,0,1,0,65.61-65.5,7.29,7.29,0,1,1,0-14.57,7,7,0,0,1,6,3.15,75.4,75.4,0,0,1,12.82,2.1,18.94,18.94,0,1,0-18.77,21,53.85,53.85,0,1,1-54,53.84v-2h11.66v2a42.25,42.25,0,1,0,42.3-42.31,30.54,30.54,0,1,1,30.54-30.53v2A77.21,77.21,0,0,1,1401,193.7Z\" style=\"fill:#ff9cd6\"/><path d=\"M1523.27,256.29h23.31v11.65h-23.31a110.64,110.64,0,0,1-110.6-110.72V0h11.65V157.22A99,99,0,0,0,1523.27,256.29Zm0-23.31h23.31v11.65h-23.31A87.34,87.34,0,0,1,1436,157.22V0h11.65V157.22A75.74,75.74,0,0,0,1523.27,233Zm0-23.31h23.31v11.65h-23.31a64,64,0,0,1-64-64.1V0h11.65V157.22A52.36,52.36,0,0,0,1523.27,209.67Zm0-23.31h23.31V198h-23.31a40.66,40.66,0,0,1-40.67-40.79V0h11.53V157.22A29.15,29.15,0,0,0,1523.27,186.36Zm-5.83-128.09V69.93h29.14V81.58h-29.14V93.24h29.14v11.65h-29.14v11.66h29.14V128.2h-29.14v11.66h29.14v11.65h-29.14v5.71a5.85,5.85,0,0,0,5.83,5.83h23.31V174.7h-23.31a17.52,17.52,0,0,1-17.48-17.48V0h11.65V46.62h29.14V58.27Z\" style=\"fill:#ff9cd6\"/></g></g></svg>\n        </div>\n    \n        <div class=\"relative p-4 flex flex-col justify-center rounded-sm w-screen mx-auto text-center flex-grow overflow-hidden\">\n          \n          <div className={ ' w-2/3 px-16 flex flex-col justify-center mx-auto bg-gray-100 shadow-lg flex-grow h-full ' + this.getClass('authorize') }>\n            <div>\n            <h1 class=\"text-3xl\">Connect to Spotify</h1>\n            <p class=\"mb-6 text-base\">Faveslist needs access to create and manage playlist on your Spotify account.</p>\n            <button\n              class=\"bg-hotpink text-white p-4 px-16 border rounded-full outline-none focus:shadow-outline\"\n              onClick={this.authorize} >\n              Authorize</button>\n\n            </div>\n          </div>\n          \n          <div className={ 'relative  w-2/3 px-16 flex flex-col justify-center mx-auto bg-gray-100 shadow-lg flex-grow h-full ' + this.getClass('playlist') }>\n            <div class=\"\">\n              <h1 class=\"text-3xl\">Create Playlist</h1>\n              <p class=\"mb-6 text-sm\">\n                Faveslist keeps all your faves in a playlist on Spotify.\n              </p>\n              <div class=\"p-4\">\n                <input \n                  type=\"text\" \n                  class=\"bg-gray-100 border rounded-sm block w-full p-4 outline-none focus:shadow-outline\" \n                  placeholder=\"Enter playlist name\"\n                  ref={this.playlistInput} \n                  value={this.state.playlist.name} />\n              </div>\n              <button \n                class=\"bg-hotpink text-white p-4 px-16 border rounded-full outline-none focus:shadow-outline\"\n                onClick={this.savePlaylist} >\n                Create Playlist\n              </button>\n              <p className=\"mt-2 text-sm\">\n                or&nbsp;\n                <a href=\"#\" onClick={this.showUserPlaylists} class=\"text-hotpink\">choose from existing</a>\n              </p>\n            </div>\n\n            <div className={`${this.state.playlistsContainerClass} absolute bg-gray-100 inset-x-0 bottom-0 top-0 flex flex-col transition-all ease-in duration-75 p-16`}>\n              <div className=\"w-full flex flex-col items-left overflow-y-auto\">\n                <ul class=\"text-left flex-grow loading\">\n                  {this.state.playlists.map((p) => \n                    <li \n                      data-id={p.id} \n                      key={p.id}\n                      class=\"cursor-pointer z-10 relative bg-gray-100 hover:text-green-400\"\n                      onClick={this.saveExisting}\n                    >\n                      {p.name}\n                    </li>\n                  )}\n                </ul>  \n              </div>\n              <a href=\"#\" class=\"text-sm text-right block mt-2 text-hotpink\" onClick={this.hideUserPlaylists}>Cancel</a>\n            </div>\n\n          </div>\n  \n          <div className={ ' w-2/3 px-16 flex flex-col justify-center mx-auto bg-gray-100 shadow-lg flex-grow h-full ' + this.getClass('done') }>\n            <div>\n              <h1 class=\"text-3xl\">Done!</h1>\n              <p class=\"mb-6 text-base\">\n                Check out more settings in \n                <a href=\"\">Settings</a>\n              </p>\n              <button \n                class=\"bg-hotpink text-white p-4 px-16 border rounded-full outline-none focus:shadow-outline\"\n                onClick={this.done} >\n                Open Faveslist\n              </button>\n            </div>\n          </div>\n\n        </div>\n          \n        <div class=\"mx-auto max-w-sm text-center\">\n          <nav class=\"flex space-x-1 my-8 mx-auto w-8\">\n            <div className={'h-2 w-2 rounded-full ' + this.navState('authorize') }></div>\n            <div className={'h-2 w-2 rounded-full ' + this.navState('playlist') }></div>\n            <div className={'h-2 w-2 rounded-full ' + this.navState('done') }></div>\n          </nav>\n        </div>\n\n      </div>\n           \n      );\n  }\n}","const {ipcRenderer, shell} = require('electron')\nconst qs = require('qs');\nconst axios = require('axios')\nconst env = require(\"env\");\n\nconst redirectUri = 'faveslist://'\nconst appConfig = {\n  playlist: null\n}\nlet refreshToken;\n\nconst authRequest = axios.create({\n  baseURL: 'https://accounts.spotify.com/'\n})\n\nconst authHeader = 'Basic ' + new Buffer.from(env.CLIENT_ID + ':' + env.CLIENT_SECRET).toString('base64');\nauthRequest.defaults.headers.common['Authorization'] = authHeader\nauthRequest.defaults.headers.common['Content-Type'] = 'application/x-www-form-urlencoded';\n\nconst apiRequest = axios.create({\n  baseURL: 'https://api.spotify.com/v1/'\n})\n\nconst simRequest = axios.create({\n  baseURL: 'https://httpstat.us/'\n})\n\nsimRequest.interceptors.response.use(function(config) {\n  return config\n}, async function(error) {\n  if (true) {\n    let refresh = await simRequest({url: '200'})\n    let original = axios.create({\n      baseURL: error.config.baseURL\n    })\n    return await original({url: '200'})\n  } else {\n    return error.response\n  }\n})\n\napiRequest.interceptors.request.use(async function (config) {\n  if (config.headers.common['Authorization'] === undefined) {\n    let tokens = await module.exports.init()\n    config.headers['Authorization'] = `Bearer ${tokens.access_token}`\n  }\n  return config\n}, function (error) {\n  debugger\n  return Promise.reject(error);\n});\n\napiRequest.interceptors.response.use(function(config) {\n  // debugger\n  return config\n}, async function(error) {\n  if (error.response.data.error.status === 401) {\n    let authOptions = {\n      method: 'POST', \n      data: qs.stringify({\n        'grant_type': 'refresh_token',\n        'refresh_token': refreshToken\n      }),\n      url: 'api/token'\n    };\n    let refresh = await authRequest(authOptions)\n    module.exports.setTokens(refresh.data)\n    ipcRenderer.invoke('update-config', {key: 'tokens', value: refresh.data})\n    // Return/retry original\n    return await apiRequest({url: error.config.url})\n  } else {\n    return error.response\n  }\n})\n\nlet currentRequestOptions, currentRequestAttempts = 0;\n\nasync function api(options) {\n  if (currentRequestAttempts > 1) {\n    currentRequestAttempts = 0;\n    throw new Error('unknown api error')\n  } else {\n    currentRequestAttempts++\n    currentRequestOptions = options\n  }\n\n  if (options.method === undefined) options.method = 'GET'\n\n  try {\n    // debugger\n    let request = await apiRequest(options)\n    if (request.status >= 200 && request.status < 300) {\n      currentRequestAttempts = 0\n      return request\n    } else {\n      throw new Error('Uncaught error from Spotify')\n    }\n  } catch (error) {\n    debugger\n  }\n\n}\n\nasync function setConfig() {\n  if (appConfig.playlist === null) {\n    appConfig.playlist = await ipcRenderer.invoke('getConfig', 'playlist')\n  }\n}\n\nasync function trackAlreadyLiked(uri) {\n  hearts = await ipcRenderer.invoke('getConfig', 'hearts')\n  return hearts.indexOf(uri) > -1\n}\n\n\nmodule.exports = {\n  init: () => {\n    return ipcRenderer.invoke('getConfig', 'tokens').then((tokens) => {\n      refreshToken = tokens.refresh_token;\n      module.exports.setTokens(tokens)\n      return tokens\n    }).catch((err) => {\n    })\n  },\n  authorize: function (state) {\n    const scope = [\n      'user-read-currently-playing', \n      'user-read-playback-state', \n      'playlist-modify-private', \n      'playlist-modify-public', \n      'playlist-read-private',\n      'playlist-read-collaborative'\n    ].join(' ')\n    const params = qs.stringify({\n        'client_id': env.CLIENT_ID,\n        'response_type': 'code',\n        'scope': scope,\n        'state': state,\n        'redirect_uri': redirectUri\n      })\n    const url = authRequest.defaults.baseURL + 'authorize'\n    shell.openExternal(`${url}?${params}`)\n  },\n  getTokens: async function(authCode) {\n    let options = {\n      method: 'POST', \n      data: qs.stringify({\n        'grant_type': 'authorization_code',\n        'code': authCode,\n        'redirect_uri': redirectUri\n      }),\n      url: 'api/token'\n    };\n    let request = await authRequest(options)\n    return request.data\n  },\n  setTokens: (tokens) => {\n    apiRequest.defaults.headers.common['Authorization'] = `Bearer ${tokens.access_token}`\n  },\n  setUser: async () => {\n    let options = {\n      url: 'me'\n    }\n    let request = await api(options)\n    return request.data\n\n  },\n  setPlaylist: async (name) => {\n    if (name.length < 1) name = 'Faveslist'\n    let userID = await ipcRenderer.invoke('getConfig', 'user.id')\n    let options = {\n      url: `users/${userID}/playlists`,\n      method: 'POST',\n      data: {\n        name: name,\n        public: false\n      }\n    }\n    let playlist = await api(options)\n    return playlist.data\n    \n  },\n  getPlaylist: async (id) => {\n    await setConfig()\n    let options = {\n      url: `playlists/${id}`\n    }\n    let request = await api(options)\n    return request.data\n  },\n  getPlaylists: async (url) => {\n    if (url === undefined) {\n      let userID = await ipcRenderer.invoke('getConfig', 'user.id')\n      url = `users/${userID}/playlists`\n    }\n    let options = {\n      url: url,\n      method: 'GET'\n    }\n    return await api(options)\n  },\n  getFaveslistTracks: async () => {\n    await setConfig()\n    let options = {\n      url: `playlists/${appConfig.playlist.id}/tracks`\n    }\n    return await api(options)\n  },\n  addTrack: async (trackURI) => {\n    if ( await trackAlreadyLiked(trackURI) ) {\n      return false\n    }\n    await setConfig()\n    let options = {\n      url: `playlists/${appConfig.playlist.id}/tracks`,\n      method: 'POST',\n      data: {\n        uris: [trackURI]\n      }\n    }\n    let request = await api(options)\n    if (request.data.snapshot_id) {\n      return true\n    } else {\n      return false\n    }\n  },\n  player: async () => {\n    let request = await api({url: 'me/player'})\n    return request.data\n  },\n  currentlyPlaying: async () => {\n    // apiRequest.defaults.headers.common['Authorization'] = `Bearer 1234`\n    let request = await api({url: 'me/player/currently-playing'})\n    return request.data !== undefined ? request.data : request\n  }\n}\n\n\n\n","export default __webpack_public_path__ + \"assets/css/app.css\";","export default __webpack_public_path__ + \"assets/css/loading.css\";","module.exports = require(\"axios\");","module.exports = require(\"electron\");","module.exports = require(\"preact\");","module.exports = require(\"qs\");"],"sourceRoot":""}